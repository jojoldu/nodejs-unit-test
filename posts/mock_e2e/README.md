# 외부 HTTP Mocking 하기

테스트 중인 컴포넌트를 분리하려면 외부로 나가는 모든 HTTP 요청을 가로채고 원하는 응답을 제공하여 협력자 HTTP API가 호출되지 않도록 해야 한다.  
Nock은 이 작업을 위한 훌륭한 도구로, 외부 서비스 동작을 정의하기 위한 편리한 문법을 제공한다. 다양한 시나리오와 응답을 시뮬레이션하기 위해서는 물론 소음과 느린 성능을 방지하기 위해 격리가 필수이다 - 좋은 비행 시뮬레이터는 맑은 푸른 하늘을 그리는 것이 아니라 안전한 폭풍과 혼돈을 가져오는 것이다. 이것은 Microservice 아키텍처에서 항상 세계의 나머지 부분을 참여시키지 않고 단일 컴포넌트에 중점을 둘 필요가 있음을 강조한다.  
외부 서비스 동작을 테스트 더블(모킹)을 사용하여 시뮬레이션하는 것이 가능하긴 하지만, 테스트를 순수한 블랙박스로 유지하기 위해 배포된 코드를 건드리지 않고 네트워크 수준에서 작업하는 것이 좋습니다.  
격리의 단점은 협력자 컴포넌트의 변경을 감지하지 못하고 두 서비스 간의 오해를 깨닫지 못하는 것이다 
- 몇 가지 계약 또는 E2E 테스트를 사용하여 이를 보상해야 한다.